/* --- Global Styles & Dark Theme Variables --- */
:root {
    --primary-color: #87CEEB; /* Sky Blue */
    --secondary-color: #90EE90; /* Light Green */
    --bg-color: #1E1E1E; /* Very Dark Grey */
    --card-bg-color: #2C2C2C; /* Dark Grey */
    --text-color: #E0E0E0; /* Light Grey Text */
    --text-muted-color: #A0A0A0; /* Muted Grey Text */
    --border-color: #444444; /* Darker Border */
    --shadow-color: rgba(0, 0, 0, 0.4);
    --body-font: 'Roboto', sans-serif;
    --border-radius: 12px; /* Slightly larger radius */
    --box-shadow: 0 6px 20px var(--shadow-color);
    --box-shadow-light: 0 3px 10px var(--shadow-color);
}

* { box-sizing: border-box; margin: 0; padding: 0; }
html { scroll-behavior: smooth; }

body {
    font-family: var(--body-font);
    background-color: var(--bg-color);
    color: var(--text-color);
    line-height: 1.6;
    display: flex;
    flex-direction: column;
    min-height: 100vh;
    overflow-x: hidden; /* Prevent horizontal scroll */
}

/* Keep login/register background separate */
body.login-page, body.register-page {
    /* Ensure the path is correct relative to the static folder */
    background-image: linear-gradient(rgba(0, 0, 0, 0.6), rgba(0, 0, 0, 0.6)), url('/static/images/background.jpg');
    background-size: cover;
    background-position: center center;
    background-attachment: fixed;
}
body.dashboard-page { background-color: var(--bg-color); } /* Ensure dashboard uses dark bg */

.container { max-width: 1300px; margin: 0 auto; padding: 0 20px; } /* Use margin: 0 auto */
.main-content { flex-grow: 1; padding-top: 1.5rem; padding-bottom: 3rem; }

a { color: var(--primary-color); text-decoration: none; transition: color 0.3s ease; }
a:hover { color: #B0E0E6; /* Lighter Sky Blue */ }
img { max-width: 100%; height: auto; vertical-align: middle; /* Align images better */}

/* --- Buttons --- */
.btn {
    display: inline-flex; /* Align icon and text */
    align-items: center;
    gap: 0.5rem;
    padding: 0.7rem 1.3rem;
    border: none;
    border-radius: 8px;
    cursor: pointer;
    font-size: 0.9rem;
    font-weight: 500;
    text-align: center;
    transition: all 0.3s ease;
    letter-spacing: 0.5px;
}
.btn i { font-size: 1.1em; } /* Slightly larger icon */
.btn-primary { background-color: var(--primary-color); color: #111; /* Dark text on light blue */ }
.btn-primary:hover { background-color: #B0E0E6; transform: translateY(-2px); box-shadow: 0 4px 10px rgba(135, 206, 235, 0.3); }
.btn-secondary { background-color: var(--secondary-color); color: #111; /* Dark text on light green */ }
.btn-secondary:hover { background-color: #98FB98; transform: translateY(-2px); box-shadow: 0 4px 10px rgba(144, 238, 144, 0.3); }

/* --- Navbar --- */
.navbar {
    background: var(--card-bg-color); /* Match cards */
    color: var(--text-color);
    padding: 0.8rem 0;
    box-shadow: 0 3px 10px var(--shadow-color);
    position: sticky; top: 0; z-index: 1000; border-bottom: 1px solid var(--border-color);}
.nav-container { display: flex; justify-content: space-between; align-items: center; max-width: 1300px; margin: 0 auto; padding: 0 20px; } /* Replicate container padding */
.nav-brand { color: var(--text-color); font-size: 1.6rem; font-weight: 700; letter-spacing: 1px; }
.nav-links { list-style: none; display: flex; align-items: center; }
.nav-links li { margin-left: 1.5rem; }
.nav-links a, .nav-links span { color: var(--text-color); font-size: 0.95rem; }
.nav-links a:hover { color: var(--primary-color); }
.nav-links span { opacity: 0.9; font-weight: 400; }

/* --- Forms (Login/Register) --- */
.auth-form {
    max-width: 400px; margin: 4rem auto; padding: 2.5rem;
    background-color: rgba(44, 44, 44, 0.9); /* Darker semi-transparent */
    border-radius: var(--border-radius);
    box-shadow: 0 5px 25px rgba(0, 0, 0, 0.3);
    border: 1px solid var(--border-color);
    -webkit-backdrop-filter: blur(5px);
    backdrop-filter: blur(5px);
}
.auth-form h2 { text-align: center; margin-bottom: 2rem; color: var(--text-color); font-weight: 700; }
.form-group { margin-bottom: 1.2rem; }
.form-group label { display: block; margin-bottom: 0.5rem; font-weight: 500; color: var(--text-muted-color); font-size: 0.9rem; }
.form-group input[type='text'], .form-group input[type='email'], .form-group input[type='password'] {
    width: 100%; padding: 0.8rem 1rem; border: 1px solid var(--border-color); border-radius: 8px;
    font-size: 1rem; background-color: #3a3a3a; color: var(--text-color); transition: border-color 0.3s ease, box-shadow 0.3s ease;
}
.form-group input::placeholder { color: #888; font-weight: 300; }
.form-group input:focus { outline: none; border-color: var(--primary-color); box-shadow: 0 0 0 3px rgba(135, 206, 235, 0.3); }
.form-check { display: flex; align-items: center; gap: 0.5rem; margin-top: -0.5rem; margin-bottom: 1.5rem; }
.form-check label { margin-bottom: 0; font-weight: 400; font-size: 0.9rem; color: var(--text-muted-color); }
.form-check input[type="checkbox"] { width: auto; margin-right: 5px; accent-color: var(--primary-color); }
.auth-form .btn { width: 100%; margin-top: 1.5rem; padding: 0.8rem; }
.form-switch { text-align: center; margin-top: 1.5rem; font-size: 0.9rem; color: var(--text-muted-color); }
.form-switch a { font-weight: 500; }

/* --- Flash Messages --- */
.flash-container { position: fixed; top: 80px; left: 50%; transform: translateX(-50%); width: 90%; max-width: 500px; z-index: 1001; }
.alert {
    padding: 0.9rem 1.5rem; margin-bottom: 1rem; border: 1px solid transparent; border-radius: 8px;
    color: #111; /* Dark text on light alerts */ position: relative; opacity: 0.95;
    box-shadow: 0 3px 10px rgba(0,0,0,0.2); font-size: 0.95rem;
}
.alert-success { background-color: var(--secondary-color); border-color: #6fbf6f; }
.alert-danger { background-color: #FFA07A; border-color: #CD5C5C; } /* Light Salmon */
.alert-warning { background-color: #FFD700; border-color: #DAA520; color: #333 } /* Gold */
.alert-info { background-color: var(--primary-color); border-color: #6caed9; }
.close-alert {
    position: absolute; top: 50%; right: 15px; transform: translateY(-50%); font-size: 1.5rem;
    font-weight: bold; color: rgba(0,0,0,0.5); cursor: pointer; transition: color 0.2s ease;
    line-height: 1; /* Better vertical alignment */
}
.close-alert:hover { color: rgba(0,0,0,0.8); }

/* --- Dashboard --- */
.dashboard-header { margin-bottom: 2rem; display: flex; justify-content: center;}
.search-box {
    display: flex; align-items: center; background-color: var(--card-bg-color);
    border-radius: 50px; padding: 0.4rem 0.6rem 0.4rem 1.2rem; /* Adjusted padding */
    box-shadow: var(--box-shadow-light); width: 100%; max-width: 600px;
    border: 1px solid var(--border-color); transition: box-shadow 0.3s ease, border-color 0.3s ease;
}
.search-box:focus-within { box-shadow: 0 0 0 3px rgba(135, 206, 235, 0.3); border-color: var(--primary-color); }
.search-icon { color: var(--text-muted-color); margin-right: 0.8rem; }
.search-box input[type="text"] {
    flex-grow: 1; border: none; outline: none; padding: 0.5rem 0; font-size: 1rem;
    background: transparent; color: var(--text-color);
}
.search-box input::placeholder { color: var(--text-muted-color); }
.search-box button { border-radius: 50px; padding: 0.5rem 1.2rem; font-size: 0.9rem; }
.search-box button i { margin-right: 0.3rem; } /* Space icon in button */

/* Results Area */
#weather-results { margin-top: 1.5rem; animation: fadeIn 0.5s ease-in-out; }
.location-title { text-align: center; font-size: 1.8rem; font-weight: 700; margin-bottom: 2rem; color: var(--text-color); }
@keyframes fadeIn { from { opacity: 0; transform: translateY(10px); } to { opacity: 1; transform: translateY(0); } }

/* New Main Grid Layout */
.main-weather-grid {
    display: grid;
    grid-template-columns: 1fr 2fr; /* Left column takes 1 part, right takes 2 */
    gap: 1.5rem;
}
.left-column, .right-column { display: flex; flex-direction: column; gap: 1.5rem; }

/* Card Styling (General) */
.card {
    background-color: var(--card-bg-color);
    border-radius: var(--border-radius);
    padding: 1.2rem 1.5rem; /* Adjusted padding */
    box-shadow: var(--box-shadow-light);
    border: 1px solid var(--border-color);
}
.card h4 { /* Section titles like "5 Days Forecast", "Today's Highlights" */
    margin-bottom: 1rem;
    color: var(--primary-color);
    font-size: 1rem;
    font-weight: 500;
    text-transform: uppercase;
    letter-spacing: 0.5px;
    border-bottom: 1px solid var(--border-color);
    padding-bottom: 0.5rem;
    display: flex; /* Align icon and text in title */
    align-items: center;
    gap: 0.6rem;
}
.card h4 i { /* Icon in card title */
    font-size: 1em; /* Match font size */
    opacity: 0.8;
}


/* Left Column Cards */
.now-card { text-align: center; }
.now-label { font-size: 0.8rem; color: var(--text-muted-color); margin-bottom: 0.5rem; text-transform: uppercase; letter-spacing: 0.5px; }
.now-main { display: flex; justify-content: center; align-items: center; gap: 1rem; margin-bottom: 0.5rem;}
.now-temp { font-size: 4rem; font-weight: 300; line-height: 1; color: var(--text-color); }
.now-icon { width: 70px; height: 70px; }
.now-desc { font-size: 1.1rem; text-transform: capitalize; margin-bottom: 1rem; color: var(--text-muted-color); }
.card-divider { border: none; height: 1px; background-color: var(--border-color); margin: 1rem 0; }
.now-detail { font-size: 0.9rem; color: var(--text-muted-color); }
.now-detail i { margin-right: 0.5rem; }

/* 5-Day Forecast Card */
.forecast-5day-card ul { list-style: none; padding: 0; }
.daily-forecast-list .forecast-list-item {
    display: flex;
    justify-content: space-between;
    align-items: center;
    padding: 0.6rem 0;
    border-bottom: 1px solid var(--border-color);
    font-size: 0.9rem;
}
.daily-forecast-list .forecast-list-item:last-child { border-bottom: none; }
.daily-forecast-list .forecast-list-item img { width: 35px; height: 35px; }
.daily-forecast-list .forecast-list-item span:first-child { font-weight: 500; color: var(--text-color); flex-basis: 30%; /* Give day name more space */}
.daily-forecast-list .forecast-list-item span:last-child { font-weight: 500; color: var(--text-muted-color); text-align: right; flex-basis: 35%;}


/* Right Column & Highlights */
.right-column h4 { text-align: center; } /* Center "Today's Highlights" */
.highlights-grid {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(180px, 1fr)); /* Responsive highlights */
    gap: 1rem;
}
.highlight-card { padding: 1rem; }
.highlight-card h5 { /* Titles within highlight cards */
    font-size: 0.8rem;
    font-weight: 400;
    color: var(--text-muted-color);
    margin-bottom: 0.8rem;
    text-transform: uppercase;
    letter-spacing: 0.5px;
}
.highlight-content { /* For simple value cards */
    display: flex;
    align-items: center;
    gap: 0.8rem;
}
.highlight-icon { font-size: 1.8rem; color: var(--primary-color); opacity: 0.8; flex-shrink: 0; width: 30px; text-align: center;}
.highlight-value { font-size: 1.5rem; font-weight: 500; color: var(--text-color); }

/* Specific Highlight Cards */
.aqi-card .aqi-main { display: flex; align-items: center; gap: 1rem; margin-bottom: 0.8rem; }
.aqi-icon { font-size: 2.5rem; color: var(--secondary-color); } /* Light Green */
.aqi-info { display: flex; flex-direction: column; align-items: flex-start;}
.aqi-value { font-size: 1.8rem; font-weight: 700; display: block; line-height: 1; }
.aqi-desc { font-size: 0.9rem; font-weight: 500; display: block; color: var(--text-muted-color);}
.aqi-card .air-components {
    display: flex; flex-wrap: wrap; gap: 0.4rem 0.8rem; /* Row and column gap */
    justify-content: space-between;
    font-size: 0.75rem; color: var(--text-muted-color); margin-top: 0.5rem;
}
.aqi-card .air-components span { white-space: nowrap;}

.sunrise-sunset-card .sun-item { display: flex; align-items: center; gap: 1rem; margin-bottom: 0.8rem;}
.sunrise-sunset-card .sun-item:last-child { margin-bottom: 0; }
.sun-icon { font-size: 2.5rem; color: #FFD700; /* Gold */ }
.sun-info span { display: block; }
.sun-info span:first-child { font-size: 0.8rem; color: var(--text-muted-color); }
.sun-info .sun-time { font-size: 1.3rem; font-weight: 500; color: var(--text-color); }

/* Hourly Chart Card */
.chart-card { padding-bottom: 1rem; /* Extra bottom padding */ }
.chart-card canvas {
    display: block; /* Prevent extra space below canvas */
    width: 100% !important; /* Override inline style */
    height: 250px !important; /* Fixed height */
    margin-top: 1rem; /* Space between title and chart */
}

/* Map Card */
.map-card { padding-bottom: 1rem; /* Extra bottom padding */ }
.map-controls {
    display: flex;
    justify-content: flex-end; /* Position controls to the right */
    align-items: center;
    gap: 0.5rem;
    margin-bottom: 0.8rem;
    font-size: 0.85rem;
}
.map-controls label { color: var(--text-muted-color); }
.map-controls select {
    padding: 0.3rem 0.5rem;
    border-radius: 4px;
    border: 1px solid var(--border-color);
    background-color: #3a3a3a;
    color: var(--text-color);
    font-size: 0.8rem;
}
#map {
    height: 300px; /* Adjust height as needed */
    width: 100%;
    border-radius: 8px;
    border: 1px solid var(--border-color);
    z-index: 1; /* Ensure map is interactive */
    background-color: #333; /* Dark background while tiles load */
}
/* Leaflet popup customization (optional) */
.leaflet-popup-content-wrapper {
    background-color: var(--card-bg-color);
    color: var(--text-color);
    border-radius: 8px;
    box-shadow: var(--box-shadow-light);
}
.leaflet-popup-content { font-size: 0.9rem; }
.leaflet-popup-tip { background: var(--card-bg-color); }
.leaflet-control-attribution a { color: var(--primary-color); } /* Make attribution links visible */


/* --- Loader --- */
.loader {
    border: 5px solid #444; /* Dark grey */
    border-top: 5px solid var(--primary-color); /* Sky Blue */
    border-radius: 50%;
    width: 40px;
    height: 40px;
    animation: spin 1s linear infinite;
    margin: 3rem auto; /* Center loader */
    display: none; /* Initially hidden */
}
@keyframes spin {
    0% { transform: rotate(0deg); }
    100% { transform: rotate(360deg); }
}

/* --- Error Message --- */
.error-message {
    color: #FFA07A; /* Light Salmon Text */
    background-color: rgba(205, 92, 92, 0.3); /* Semi-transparent Indian Red */
    border: 1px solid #CD5C5C; /* Indian Red Border */
    padding: 1rem;
    margin: 1.5rem auto;
    text-align: center;
    border-radius: 8px;
    max-width: 600px;
    font-weight: 500;
    display: none; /* Initially hidden */
}

/* --- Footer --- */
footer {
    background-color: var(--card-bg-color);
    color: var(--text-muted-color);
    text-align: center;
    padding: 1rem 0;
    margin-top: 3rem;
    font-size: 0.85rem;
    border-top: 1px solid var(--border-color);
}
footer p { margin: 0; }

/* --- Responsiveness --- */
@media (max-width: 1024px) {
    .main-weather-grid { grid-template-columns: 1fr; /* Stack columns */ }
    .right-column h4 { margin-top: 1rem; /* Add space when stacked */ }
    .highlights-grid { grid-template-columns: repeat(auto-fit, minmax(160px, 1fr)); }
    .chart-card canvas { height: 220px !important; }
    #map { height: 250px; }
}

@media (max-width: 768px) {
     .container, .nav-container { padding: 0 15px; }
     .nav-brand { font-size: 1.4rem; }
     .nav-links li { margin-left: 1rem; }
     .nav-links a, .nav-links span { font-size: 0.9rem; }
     .search-box { max-width: 95%; padding: 0.4rem 0.5rem 0.4rem 1rem;}
     .search-box input[type="text"] { font-size: 0.9rem;}
     .search-box button { padding: 0.5rem 1rem; font-size: 0.85rem;}
     .location-title { font-size: 1.5rem; margin-bottom: 1.5rem; }
     .now-temp { font-size: 3.5rem; }
     .highlight-value { font-size: 1.3rem; }
     .highlights-grid { grid-template-columns: repeat(2, 1fr); gap: 0.8rem; } /* Ensure 2 columns on tablet */
     .chart-card canvas { height: 200px !important; }
     #map { height: 220px; }
     .map-controls { font-size: 0.8rem; }
}

@media (max-width: 480px) {
    body { font-size: 15px; } /* Slightly smaller base font */
    .auth-form { padding: 1.5rem; margin: 2rem auto; }
    .search-box { padding: 0.3rem 0.4rem 0.3rem 0.8rem; }
    .search-box button { font-size: 0.8rem; padding: 0.4rem 0.8rem; }
    .search-box button i { display: none; } /* Hide icon on small screens */
    .main-weather-grid { gap: 1rem; }
    .left-column, .right-column { gap: 1rem; }
    .card { padding: 1rem; }
    .card h4 { font-size: 0.9rem; padding-bottom: 0.4rem; margin-bottom: 0.8rem; }
    .location-title { font-size: 1.3rem; }
    .now-temp { font-size: 3rem; }
    .now-icon { width: 60px; height: 60px; }
    .now-desc { font-size: 1rem; }
    .highlights-grid { grid-template-columns: repeat(2, 1fr); gap: 0.7rem;} /* Still 2 cols, smaller gap */
    .highlight-card { padding: 0.8rem;}
    .highlight-card h5 { font-size: 0.7rem; margin-bottom: 0.5rem;}
    .highlight-icon { font-size: 1.5rem; width: 25px;}
    .highlight-value { font-size: 1.1rem;}
    .aqi-icon, .sun-icon { font-size: 2rem; }
    .aqi-value, .sun-info .sun-time { font-size: 1.1rem;}
    .aqi-card .air-components { font-size: 0.7rem; gap: 0.2rem 0.5rem; }
    .daily-forecast-list .forecast-list-item { font-size: 0.8rem; padding: 0.5rem 0; }
    .daily-forecast-list .forecast-list-item img { width: 30px; height: 30px; }
    .chart-card canvas { height: 180px !important; }
    #map { height: 200px; }
    .map-controls { flex-direction: column; align-items: flex-end; gap: 0.3rem;} /* Stack controls */
    .footer { font-size: 0.8rem; }
}